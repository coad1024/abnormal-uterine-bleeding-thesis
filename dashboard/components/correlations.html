<section id="correlations" class="mb-16 scroll-mt-20">
    <h2 class="text-3xl font-bold text-center mb-2" style="color: var(--highlight);">Statistical Correlations</h2>
    <p class="text-center max-w-3xl mx-auto mb-10" style="color: var(--muted);">Explore the statistical relationships between histopathological findings and key clinical variables. Click the tabs to understand how factors like age and medical history correlate with endometrial pathology.</p>
    
    <div class="card p-6 rounded-lg shadow">
        <div class="border-b border-gray-200 dark:border-gray-700">
            <nav class="-mb-px flex flex-wrap space-x-6" aria-label="Tabs">
                <button class="correlation-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-teal-500" style="color: var(--highlight);" data-target="corr-age">vs. Age</button>
                <button class="correlation-tab hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" data-target="corr-lmp">vs. LMP</button>
                <button class="correlation-tab hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" data-target="corr-drug">vs. Drug History</button>
                <button class="correlation-tab hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent" data-target="corr-complaints">vs. Complaints</button>
            </nav>
        </div>
        <div class="py-6 space-y-4">
            <div id="corr-age" class="correlation-content">
                <h4 class="text-lg font-semibold mb-2">Pathology vs. Age (r = 0.264) <span class="text-sm font-normal" style="color: var(--muted);"><a href="#" class="figure-ref" data-figure="Figure 7">Figure 7</a></span></h4>
                <p>A <strong style="color: var(--highlight);">significant positive correlation</strong> suggests that as age increases, there is a tendency for more severe pathological changes in the endometrium. This supports the clinical understanding that older women are more likely to develop conditions like endometrial hyperplasia or carcinoma.</p>
                <div class="mt-3">
                    <img loading="lazy" src="../figures/page66_img1.png" alt="Correlation: Histopathological Diagnosis and Age" class="w-full max-w-md mx-auto rounded-lg shadow-sm">
                    <p class="text-center mt-2 text-sm" style="color: var(--muted);">Scatter plot showing correlation between histopathological diagnosis and age</p>
                </div>
            </div>
            <div id="corr-lmp" class="correlation-content hidden">
                <h4 class="text-lg font-semibold mb-2">Pathology vs. Last Menstrual Period (LMP) (r = 0.766) <span class="text-sm font-normal" style="color: var(--muted);"><a href="#" class="figure-ref" data-figure="Figure 8">Figure 8</a></span></h4>
                <p>A <strong style="color: var(--highlight);">strong positive correlation</strong> indicates that the histopathological findings closely align with the expected phase of the menstrual cycle based on the LMP, reinforcing the importance of menstrual history in diagnosis.</p>
                <div class="mt-3">
                    <img loading="lazy" src="../figures/page68_img1.png" alt="Correlation: Histopathological Diagnosis and LMP" class="w-full max-w-md mx-auto rounded-lg shadow-sm">
                    <p class="text-center mt-2 text-sm" style="color: var(--muted);">Scatter plot showing correlation between histopathological diagnosis and LMP</p>
                </div>
            </div>
            <div id="corr-drug" class="correlation-content hidden">
                <h4 class="text-lg font-semibold mb-2">Pathology vs. Drug History (r = 0.287) <span class="text-sm font-normal" style="color: var(--muted);"><a href="#" class="figure-ref" data-figure="Figure 9">Figure 9</a></span></h4>
                <p>A <strong style="color: var(--highlight);">moderate positive correlation</strong> reveals a meaningful association between hormonal medication use and specific endometrial changes, highlighting the need to consider a patient's drug history.</p>
                <div class="mt-3">
                    <img loading="lazy" src="../figures/page70_img1.png" alt="Correlation: Histopathological Diagnosis and Drug History" class="w-full max-w-md mx-auto rounded-lg shadow-sm">
                    <p class="text-center mt-2 text-sm" style="color: var(--muted);">Scatter plot showing correlation between histopathological diagnosis and drug history</p>
                </div>
            </div>
            <div id="corr-complaints" class="correlation-content hidden">
                <h4 class="text-lg font-semibold mb-2">Pathology vs. Presenting Complaints (r = -0.052) <span class="text-sm font-normal" style="color: var(--muted);"><a href="#" class="figure-ref" data-figure="Figure 10">Figure 10</a></span></h4>
                <p>A <strong style="color: var(--highlight-secondary);">weak and statistically insignificant correlation</strong> indicates that clinical symptoms alone are not reliable predictors of the underlying endometrial pathology, underscoring the necessity of histopathological evaluation.</p>
                <div class="mt-3">
                    <img loading="lazy" src="../figures/page72_img1.png" alt="Correlation: Complaints and Histopathological Diagnosis" class="w-full max-w-md mx-auto rounded-lg shadow-sm">
                    <p class="text-center mt-2 text-sm" style="color: var(--muted);">Scatter plot showing correlation between complaints and histopathological diagnosis</p>
                </div>
            </div>
            <div class="citation-tooltip hidden absolute bg-white dark:bg-gray-800 p-3 rounded shadow-lg border border-gray-200 dark:border-gray-700 max-w-sm z-10"></div>
        </div>
    </div>

    <!-- Inline script to ensure tabs are initialized -->
    <script>
        // Initialize tabs when this component is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Try to initialize directly
            if (typeof initCorrelationTabs === 'function') {
                console.log('Direct initialization of correlation tabs');
                initCorrelationTabs();
            } else {
                // Fallback: try again after a delay
                setTimeout(function() {
                    if (typeof initCorrelationTabs === 'function') {
                        console.log('Delayed initialization of correlation tabs');
                        initCorrelationTabs();
                    } else {
                        console.error('Could not initialize correlation tabs - function not found');
                    }
                }, 1000);
            }
            
            // Add direct click handlers as backup
            const tabs = document.querySelectorAll('.correlation-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Get target content ID
                    const targetId = this.getAttribute('data-target');
                    
                    // Hide all content divs
                    document.querySelectorAll('.correlation-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    
                    // Show the target content
                    const targetContent = document.getElementById(targetId);
                    if (targetContent) {
                        targetContent.classList.remove('hidden');
                    }
                    
                    // Update tab styles
                    tabs.forEach(t => {
                        t.classList.remove('border-teal-500');
                        t.classList.add('border-transparent');
                        t.removeAttribute('style');
                    });
                    
                    this.classList.remove('border-transparent');
                    this.classList.add('border-teal-500');
                    this.style.color = 'var(--highlight)';
                });
            });
        });
    </script>
</section>